#!/bin/bash
#
# Written by Yasuharu Mizutani.

usage(){
    cat <<-EOF
	
	使い方:
	  putkadai 
	
	このPCのホームディレクトリ下にあるkadaiディレクトリ内のjava18ディレクトリ（~/kadai/java18）をファイル
    サーバ上のkadaiディレクトリ内に提出(リモートコピー)します．
	
	サーバ名はデフォルトでは o-ssh.center.oit.ac.jp です．
	環境変数 KADAI_HOST でサーバ名を指定することができます．
	(例) env KADAI_HOST=pc1350l putkadai
	
    通常のputkadaiと異なり，内部でscpを用いる．
	
	EOF
}

if [ "$#" -ge 1 ]; then
    case "$1" in
        -h|-help|--help)
            usage
            exit 0
            ;;
        *)
            usage
            exit 1
            ;;
    esac
fi

id="`/usr/local/bin/oitname`" || exit 1
rhost="`/usr/local/bin/kadaihost`"

[ -d ~/kadai/`/usr/local/bin/course` ] || mkdir -p -m 705 ~/kadai/`/usr/local/bin/course`

scp -pr ~/kadai/`/usr/local/bin/course` ${id}@${rhost}:kadai/
echo $?

